{%extends 'users/base.html'%} {% load widget_tweaks %} {%block styles%}
<link rel="stylesheet" href="../../static/users/assets/css/scout.css">

<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
{%endblock styles%} {%block content%}
<script>
    var options = {
        bottom: '64px', // default: '32px'
        right: 'unset', // default: '32px'
        left: '32px', // default: 'unset'
        time: '0.5s', // default: '0.3s'
        mixColor: '#dedede', // default: '#fff'
        backgroundColor: '#fff', // default: '#fff'
        buttonColorDark: '#100f2c', // default: '#100f2c'
        buttonColorLight: '#fff', // default: '#fff'
        saveInCookies: true, // default: true,
        label: '', // default: ''
        autoMatchOsTheme: true // default: true
    }
    const darkmode = new Darkmode(options);

    function toggle() {
        darkmode.toggle();

    }
</script>
<script>
    $(document).ready(function() {
        $("#teamNumber").on("input", function() {
            var teamNumber = $("#teamNumber").val();
            $.get("https://www.thebluealliance.com/api/v3/team/frc" + teamNumber + "/simple", {
                "X-TBA-Auth-Key": "PzOW8s1DYGlVkgAsikwVlhy5wZ5Tm85fKSjd0DfiUJFQOGhsReyZEf88EEoAU1Cw"
            }, function(data) {
                var jObject = (data);
                $("#tba-link").attr('href', 'https://www.thebluealliance.com/team/' +
                    teamNumber);
                $(".teamNameChange").html(jObject['nickname']);
            }).fail(function() {
                $(".teamNameChange").html("Invalid team number...");
            });
        });
    });

    async function changeTeamName() {
        var teamNumber = $("#teamNumber").val();
        $.get("https://www.thebluealliance.com/api/v3/team/frc" + teamNumber + "/simple", {
            "X-TBA-Auth-Key": "PzOW8s1DYGlVkgAsikwVlhy5wZ5Tm85fKSjd0DfiUJFQOGhsReyZEf88EEoAU1Cw"
        }, function(data) {
            var jObject = (data);
            $(".teamNameChange").html(jObject['nickname']);
        }).fail(function() {
            $(".teamNameChange").html("Invalid team number...");
        });
    }
</script>
<script>
    $(document).ready(function() {
        $('#select-comp-dropdown').change(function() {
            var opt_val = $('#select-comp-dropdown option:selected').text();
            $('#getCompDrop').val(opt_val);

        });

    });
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<title>FRCS Scouting</title>
</body>
<style>
    .darkmode--activated i {
        color: black;
    }
    
    #getCompDrop {
        display: none;
        visibility: hidden;
    }
</style>

</style>
<br>
<br>
<div class="form">
    <div class="header">
        <h1 id="scoutfor">Game Scout
            <h1 id="teamNumberHeader"></h1>
        </h1>
        <p id="teamNameHeader"></p>
    </div>

    <div class="formContents">
        <form name="scoutForm" method="post">
            {%csrf_token%}

            <!--<select id="getCompDrop" name="Comp" class="custom-select" onclick="getCompData()">
                    <option>Select Competition</option>
                </select>-->
    </div>

    <center>
        <p id="label">Team Number</p>
        <!--<select id="teamNumber" class="custom-select" name="teamNumber" onchange="changeName(); changeTeams()">
                <option>Select Team</option>
                </select>-->
        {{ form.scouted_team_num |attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: teamNumber"|attr:"id:teamNumber"|attr:"min: '0'" }}
        <div class='team-extra-info-card'>
            <p id="teamName" class="teamName"><i class="teamNameChange">Unknown Team</i></p>
            <button id="tba-link" class='btn btn-light' style='width: 90%;'>Get TBA Data</button>
        </div>
        <br>
    </center>
    <center>
        <p id="label">Competition</p>
        <select id='select-comp-dropdown' class='custom-select'>
                <option>--SELECT COMPETITION--</option>
                <!--THIS COULD BE TEMPORAY IF WE FIGURE OUT HOW TO ADD COMPS TO A DJANGO SELECT WIDGET-->
                <script>
                    $(document).ready(function () {
                        window.onload = async function getComps() {
                            team_num = $('#teamNumber').val()
                            $.get("https://www.thebluealliance.com/api/v3/team/frc" + {{request.user.team_num}} + "/events/2020", {
                                "X-TBA-Auth-Key": "PzOW8s1DYGlVkgAsikwVlhy5wZ5Tm85fKSjd0DfiUJFQOGhsReyZEf88EEoAU1Cw"
                            }, function (data) {
                                var jObject = (data);
    
                                for (i = 0; i < 5; i++) {
                                    console.log(jObject[i]['name'])
                                    $('#select-comp-dropdown').append('<option key=' + jObject[i]['event_code'] + '>' + jObject[i]['name'] + '</option>')
                                    
                                }
    
                            })
                        }
                    })
                </script>
            </select>
    </center>
    {{ form.competition|attr:"class:form-control"|attr:"placeholder:Competition"|attr:"name: Competition"|attr:"id:getCompDrop" }}
    <center>
        <p class="teamName"><i class="team-not-here"></i></p>

        </br>

        <script>
            $("#select-comp-dropdown").keyup(function() {

                team_num = $('#teamNumber').val()
                var opt_val = $('#select-comp-dropdown').val();

                $.get("https://www.thebluealliance.com/api/v3/team/frc" + team_num + "/events/2020/simple", {
                    "X-TBA-Auth-Key": "PzOW8s1DYGlVkgAsikwVlhy5wZ5Tm85fKSjd0DfiUJFQOGhsReyZEf88EEoAU1Cw"
                }, function(data) {
                    var jObject = (data);

                    for (i = 0; i < jObject.length; i++) {
                        if (jObject[i]['name'] != opt_val) {
                            $('.team-not-here').append("This team isnt competing here")
                        }
                    }

                })

            })
        </script>

        <p id="label">Match Number</p>
        <!--<input class="form-control" type="number" id="matchNumber" name="matchNumber" onchange="changeTeams()" placeholder="00" />
                <p id="matchType" class="matchType"><i class="matchTypeChange"></i></p>-->
        {{ form.match_number|attr:"class:form-control"|attr:"placeholder:00"|attr:"onchange: changeTeams()" |attr:"name: matchNumber"|attr:"id: matchNumber" |attr:"min: 0"}}
        <br>

        <p id="label">Match Type</p>
        <!--<select id="matchTypeOp" name="matchTypeOp" class="custom-select" onchange="changeTeams()">
                    <option value="qm">Qualifying Match</option>
                    <option value="qf">Quarter Final</option>
                    <option value="sf">Semi Final</option>
                    <option value="f">Final</option>
                    <option value="ef">Elimination Final</option>
                </select>-->
        {{ form.match_type|attr:"class:custom-select"|attr:"placeholder:Qualifying Match"|attr:"onchange: changeTeams()" |attr:"name: matchTypeOp"|attr:"id: matchTypeOp"}}
        </br>




        <h1 style='padding-top: 20px;' id="entry_title">Autonomous Period</h1>
        <hr id="hr">
        </br>

        <p id="label">Does the Robot Pass the Initiation Line?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.initiation_line|attr:"class:custom-select"|attr:"placeholder:No"|attr:"name: initLine"|attr:"id: initLine" }}
        </br>
        </br>

        <p id="label">Low Goal Power Cells Scored?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                <script>
                for(var i=0;i<=20;i++)
                {
                document.write("<option value=" +i+">"+i+"</option>");
                }            
                </script>
                </select>-->
        {{ form.auto_low_goal_scored|attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: autoLow"|attr:"id: autoLow" |attr:"min: 0"|attr:"max:100"}}
        </br>
        </br>

        <p id="label">Higher Outer Goal Power Cells Scored?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                <script>
                for(var i=0;i<=20;i++)
                {
                document.write("<option value=" +i+">"+i+"</option>");
                }            
                </script>
                </select>-->
        {{ form.auto_outer_goal_scored|attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: autoOuter"|attr:"id: autoOuter"|attr:"min: 0"|attr:"max:100" }}
        </br>
        </br>

        <p id="label">Higher Inner Goal Power Cells Scored?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                <script>
                for(var i=0;i<=20;i++)
                {
                document.write("<option value=" +i+">"+i+"</option>");
                }            
                </script>
                </select>-->
        {{ form.auto_inner_goal_scored|attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: autoInner"|attr:"id: autoInner" |attr:"min: 0"|attr:"max:100"}}
        </br>
        </br>

        <h1 id="entry_title">Midgame</h1>
        <hr id="hr">
        </br>

        <p id="label">How Many Power Cells Does The Robot Score In The Low Goal?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                <script>
                for(var i=0;i<=20;i++)
                {
                document.write("<option value=" +i+">"+i+"</option>");
                }            
                </script>
                </select>-->
        {{ form.low_goal_scored|attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: low"|attr:"id: low"|attr:"min: 0"|attr:"max:100" }}
        </br>
        </br>

        <p id="label">How Many Power Cells Does The Robot Score In The High Outer Goal?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                <script>
                for(var i=0;i<=20;i++)
                {
                document.write("<option value=" +i+">"+i+"</option>");
                }            
                </script>
                </select>-->
        {{ form.outer_goal_scored|attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: outer"|attr:"id: outer" |attr:"min: 0"|attr:"max:100"}}
        </br>
        </br>

        <p id="label">How Many Power Cells Does The Robot Score In The High Inner Goal?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                <script>
                for(var i=0;i<=20;i++)
                {
                document.write("<option value=" +i+">"+i+"</option>");
                }            
                </script>
                </select>-->
        {{ form.inner_goal_scored|attr:"class:custom-select"|attr:"placeholder:00"|attr:"name: inner"|attr:"id: inner"|attr:"min: 0"|attr:"max:100" }}
        </br>
        </br>

        <p id="label">Does The Bot Complete Rotational Control? </p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.control_panel_rot|attr:"class:form-control"|attr:"name: controlPanelRot"|attr:"id: controlPanelRot" }}
        </br>
        </br>

        <p id="label">Does The Bot Complete Positional Control?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.control_panel_pos|attr:"class:form-control"|attr:"placeholder:00"|attr:"name: controlPanelPos"|attr:"id: controlPanelPos" }}
        </br>
        </br>


        <h1 id="entry_title">Endgame</h1>
        <hr id="hr">
        </br>

        <p id="label">Does The Robot Climb?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.robot_climb|attr:"class:custom-select"|attr:"placeholder:No"|attr:"name: climb"|attr:"id: climb" }}
        </br>
        </br>

        <p id="label">Does the robot help level the generator?</p>
        <!--<select id="controlPanel" name="controlPanel" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.robot_generator|attr:"class:custom-select"|attr:"placeholder:No"|attr:"name: generator"|attr:"id: generator" }}
        </br>
        <br>

        <p id="label">Did the robot have the help of another robot to climb?</p>
        <!--<select id="endHelpClimb" name="endHelpClimb" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.robot_climb_help|attr:"class:custom-select"|attr:"placeholder:No"|attr:"name: endHelpClimb"|attr:"id: endHelpClimb" }}
        </br>
        <br>

        <h1>Overall</h1>
        <hr id="hr">
        </br>


        <p id="label">Is Defense Played?</p>
        <!--<select id="midDefensePlayed" name="midDefensePlayed" class="custom-select">
                    <option value="0:No,Yes">No</option>
                    <option value="1:No,Yes">Yes</option>
                </select>-->
        {{ form.defense_played|attr:"class:custom-select"|attr:"placeholder:No"|attr:"name: midDefensePlayed"|attr:"id: midDefensePlayed" }}
        </br>
        </br>

        <p id="label">What percent of time is defense played? <i>(Estimation)</i></p>
        <!--<input class="form-control" type="number" name="midDefensePlayedPercent" id="midDefensePlayedPercent" max="100" min="0" />-->
        {{ form.defense_percentage|attr:"class:form-control"|attr:"placeholder:00"|attr:"name: midDefensePlayedPercent"|attr:"id: midDefensePlayedPercent"|attr:"min: 0"|attr:"max:100" }}
        </br>






        <p id="label">Did the robot have any penalties during the match?</p>
        <!--<select id="miscPenalties" name="miscPenalties" class="custom-select">
                    <option value="0:None,Yellow,Red">None</option>
                    <option value="0:No,Yellow,Red">Yellow</option>
                    <option value="1:No,Yellow,Red">Red</option>
                </select>-->
        {{ form.penalties|attr:"class:custom-select"|attr:"placeholder:No"|attr:"name: miscPenalties"|attr:"id: miscPenalties" }}
        </br>
        <h1 id="scoutfor">Notes
            <h1 id="teamNumberHeader"></h1>
        </h1>
        {{ form.notes|attr:"class:form-control"|attr:"rows:3"|attr:"id:notes-text" }}
    </center>
    </br>
    <input class="inp-cbx" id="cbx" type="checkbox" style="display: none;" onchange="ShowButton()" />
    <label class="cbx" for="cbx"><span>
                <svg width="12px" height="10px" viewbox="0 0 12 10">
                    <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg></span><span id="checkbox-text">Check to Confirm Submission</span></label>
    <br>
    <input id="submit" class="form-control" type="submit" value="Submit Scouting Data" class="submit_form" />
    <br>
    </form>
</div>

<br>
</div>



<script>
    function ShowButton() {
        var checkBox = document.getElementById("cbx");
        var text = document.getElementById("submit");

        if (checkBox.checked == true) {
            text.style.display = "block";
        }
        if (checkBox.checked == false) {
            text.style.display = "none";
        }
    }

    $(document).ready(function() {
        var checkBox = document.getElementById("cbx");
        var text = document.getElementById("submit");
        checkBox.checked == false;
        if (checkBox.checked == true) {
            text.style.display = "block";
        }
        if (checkBox.checked == false) {
            text.style.display = "none";
        }
    });
</script>
<br>
<script src="../../static/users/assets/js/GetScoutData.js"></script>
<script src="../../static/users/assets/js/getFieldValidity.js"></script>

{%endblock content%}